import { Component, OnDestroy } from '@angular/core';
import { MaterialDTO } from '../../../models/MaterialDTO';
import { MaterialService } from '../../../services/material.service';
import { CommonModule } from '@angular/common';
import { UserService } from '../../../services/user.service';
import { Subscription } from 'rxjs';
import { FormatDatePipe } from '../../../pipes/format-date.pipe';
import { RouterLink } from '@angular/router';
@Component({
  selector: 'app-materials-screen',
  standalone: true,
  imports: [CommonModule, FormatDatePipe, RouterLink],
  templateUrl: './materials-screen.component.html',
  styleUrl: './materials-screen.component.css',
})
export class MaterialsScreenComponent implements OnDestroy {
  userId: string | null = null;
  private subscription: Subscription;
  expandedState: Record<number, boolean> = {};

  materials = [{"id":5,"uploadDate":"2024-03-11T11:17:04.9061622","topic":"The French Revolution","summery":"The French Revolution, lasting from 1789 to 1799, was a period of significant social and political upheaval in France that led to the end of the absolute monarchy. It was fueled by factors such as a financial crisis, social inequality, and Enlightenment ideas, and key events included the Estates-General, the Storming of the Bastille, the Reign of Terror, and the rise of Napoleon Bonaparte. Its impact was the establishment of principles like liberty, equality, and fraternity that influenced revolutions worldwide.","content":"The French Revolution, which took place from 1789 to 1799, was a period of radical social and political upheaval in France that had a profound impact on the history of the modern world. It challenged the traditional structures of power and authority and paved the way for new political and social orders. Causes of the Revolution: The revolution was the culmination of a long period of economic, social, and political discontent. Factors contributing to this unrest included: Financial Crisis: France's involvement in expensive wars, including the American Revolution, had left the state on the brink of bankruptcy. Social Inequality: The French society was divided into three estates: the clergy (First Estate), the nobility (Second Estate), and the common people (Third Estate). The Third Estate, which made up the vast majority of the population, bore the brunt of taxation while having little political power. Enlightenment Ideas: The spread of Enlightenment ideas challenging traditional structures of power and authority inspired people to question the status quo and demand change. Key Events of the Revolution: The Estates-General: In 1789, King Louis XVI called a meeting of the Estates-General to address the financial crisis. The Third Estate declared itself the National Assembly, signaling the start of the revolution. Storming of the Bastille: On July 14, 1789, revolutionaries stormed the Bastille prison, a symbol of royal authority, marking a turning point in the revolution. The Reign of Terror: From 1793 to 1794, the revolution took a radical turn. Led by Maximilien Robespierre, the Jacobins sought to purge France of enemies of the revolution, leading to mass executions, including that of King Louis XVI and Queen Marie Antoinette. The Rise of Napoleon: The instability of the revolution set the stage for Napoleon Bonaparte's rise to power. In 1799, he staged a coup d'état, ending the revolution and establishing himself as the ruler of France. Impact of the Revolution: End of Absolute Monarchy: The revolution abolished the feudal system and the absolute monarchy, establishing the principles of liberty, equality, and fraternity. Rights and Laws: The Declaration of the Rights of Man and of the Citizen, adopted in 1789, laid out the ideals of freedom, equality, and brotherhood. Influence on the World: The revolutionary ideas spread across Europe and the world, inspiring revolutions and movements for democracy and independence. The French Revolution fundamentally changed the social, political, and economic fabric of France and had a lasting impact on the world. It challenged the traditional hierarchy and laid the groundwork for modern democratic societies."},{"id":6,"uploadDate":"2024-03-11T11:22:34.2777044","topic":"The French Revolution","summery":"The French Revolution, which occurred from 1789 to 1799, was a period of radical social and political transformation in France. It was driven by economic hardships, social inequality, and Enlightenment ideas. Key events included the Estates-General, the storming of the Bastille, the Reign of Terror, and the rise of Napoleon. The revolution led to the end of the absolute monarchy, the establishment of principles of liberty and equality, and influenced movements for democracy worldwide.","content":"The French Revolution, which took place from 1789 to 1799, was a period of radical social and political upheaval in France that had a profound impact on the history of the modern world. It challenged the traditional structures of power and authority and paved the way for new political and social orders. Causes of the Revolution: The revolution was the culmination of a long period of economic, social, and political discontent. Factors contributing to this unrest included: Financial Crisis: France's involvement in expensive wars, including the American Revolution, had left the state on the brink of bankruptcy. Social Inequality: The French society was divided into three estates: the clergy (First Estate), the nobility (Second Estate), and the common people (Third Estate). The Third Estate, which made up the vast majority of the population, bore the brunt of taxation while having little political power. Enlightenment Ideas: The spread of Enlightenment ideas challenging traditional structures of power and authority inspired people to question the status quo and demand change. Key Events of the Revolution: The Estates-General: In 1789, King Louis XVI called a meeting of the Estates-General to address the financial crisis. The Third Estate declared itself the National Assembly, signaling the start of the revolution. Storming of the Bastille: On July 14, 1789, revolutionaries stormed the Bastille prison, a symbol of royal authority, marking a turning point in the revolution. The Reign of Terror: From 1793 to 1794, the revolution took a radical turn. Led by Maximilien Robespierre, the Jacobins sought to purge France of enemies of the revolution, leading to mass executions, including that of King Louis XVI and Queen Marie Antoinette. The Rise of Napoleon: The instability of the revolution set the stage for Napoleon Bonaparte's rise to power. In 1799, he staged a coup d'état, ending the revolution and establishing himself as the ruler of France. Impact of the Revolution: End of Absolute Monarchy: The revolution abolished the feudal system and the absolute monarchy, establishing the principles of liberty, equality, and fraternity. Rights and Laws: The Declaration of the Rights of Man and of the Citizen, adopted in 1789, laid out the ideals of freedom, equality, and brotherhood. Influence on the World: The revolutionary ideas spread across Europe and the world, inspiring revolutions and movements for democracy and independence. The French Revolution fundamentally changed the social, political, and economic fabric of France and had a lasting impact on the world. It challenged the traditional hierarchy and laid the groundwork for modern democratic societies."},{"id":7,"uploadDate":"2024-03-13T18:50:08.2100563","topic":"Python Programming Language","summery":"Python is a high-level, interpreted programming language that emphasizes simplicity and readability. It supports multiple programming paradigms and has a vast community with numerous third-party modules. Learning the basic syntax, control flow, and data structures is essential to start programming in Python.","content":"Python is a high-level, interpreted programming language known for its simplicity and readability, making it an excellent choice for beginners and experienced programmers alike. Developed by Guido van Rossum and first released in 1991, Python's design philosophy emphasizes code readability with its use of significant whitespace.\r\n\r\nPython supports multiple programming paradigms, including procedural, object-oriented, and functional programming. Its comprehensive standard library provides tools suited to many tasks, making Python a versatile language for various applications, from web development to data analysis.\r\n\r\nOne of Python's strengths is its community and the vast array of third-party modules and libraries available, allowing for the extension of its capabilities and the facilitation of tasks like machine learning, data visualization, and web development.\r\n\r\nTo get started with Python, one only needs to learn the basic syntax, understand control flow (loops and conditionals), and become familiar with Python's data structures such as lists, tuples, dictionaries, and sets. With these fundamentals, a new programmer can begin to explore the powerful and diverse applications of Python in the world of programming.\r\n\r\n"},{"id":8,"uploadDate":"2024-03-13T18:51:51.1617714","topic":"The History and Impact of the Internet","summery":"The Internet, originating from ARPANET in the 1960s, expanded through the development of TCP/IP in the 1970s-80s and the World Wide Web in the 1990s. Its growth has revolutionized various sectors and led to the democratization of information and global connectivity.","content":"The Internet, a revolutionary technology that has transformed every aspect of our lives, has a fascinating history that dates back to the late 20th century. Its inception was rooted in the desire to create a robust, fault-tolerant communication network. This led to the development of ARPANET in the 1960s, a project funded by the U.S. Department of Defense, which laid the groundwork for the Internet we know today.\r\n\r\nThroughout the 1970s and 1980s, the network expanded beyond military and academic institutions, incorporating a growing number of computers. The introduction of the Transmission Control Protocol/Internet Protocol (TCP/IP) was pivotal, establishing a set of rules that allowed diverse computer networks to communicate seamlessly.\r\n\r\nThe 1990s marked a significant turning point with the advent of the World Wide Web, conceptualized by Tim Berners-Lee. The web provided a user-friendly interface to access information, leading to an explosion in Internet usage. Web browsers, search engines, and the proliferation of websites made the Internet accessible and useful to the general public.\r\n\r\nOver the subsequent decades, the Internet has seen exponential growth, profoundly influencing commerce, communication, education, and entertainment. The rise of social media, the advent of mobile computing, and the development of cloud technology have further reshaped our digital landscape.\r\n\r\nToday, the Internet is an integral part of our global infrastructure, a platform for innovation and a tool for democratizing information, connecting billions of people worldwide. Its evolution continues, with emerging technologies like the Internet of Things (IoT) and 5G promising to unlock new possibilities and redefine our digital future."},{"id":1014,"uploadDate":"2024-03-28T15:35:32.8602189","topic":"The Impact of Technology on Education and Benefits of Regular Exercise","summery":"The text explores the evolution of technology in education and the comprehensive benefits of regular exercise. It discusses how technology has revolutionized teaching methods and the historical integration of technology in education. On the other hand, it delves into how regular exercise benefits physical, mental, emotional, and social health.","content":"The Impact of Technology on Education: A Comprehensive Exploration\nIntroduction\nThe advent of technology has revolutionized many sectors, including education. This transformation is profound, impacting teaching methodologies, learning environments, accessibility, and the educational content itself. This article delves into the historical evolution of technology in education, examines its current state, explores the challenges and benefits, and anticipates future trends.\n\nHistorical Context\nThe Early Days\nThe integration of technology in education dates back to the 20th century when radios and television sets were used as educational tools. The 1960s introduced programmed learning delivered via machines. However, the real pivot came with the introduction of computers in the 1980s, which began to significantly alter the educational landscape.\n\nThe Rise of the Internet\nThe 1990s and early 2000s witnessed the internet revolutionizing education, transforming how information is accessed, consumedThe Comprehensive Benefits of Regular Exercise\nIntroduction\nIn our fast-paced world, maintaining a consistent exercise routine can be challenging, yet it's one of the most beneficial choices we can make for our overall well-being. Regular physical activity is pivotal not just for our physical health but also for our mental and emotional balance. This article delves into the multifaceted benefits of regular exercise, providing a holistic view of how staying active can transform our lives.\n\nChapter 1: Physical Health Benefits\n1.1 Cardiovascular Health\n\nRegular exercise is renowned for its significant benefits to the cardiovascular system. Engaging in aerobic activities like jogging, swimming, or cycling strengthens the heart muscle, enhances blood circulation, and helps lower blood pressure. Over time, individuals who maintain an active lifestyle have a notably reduced risk of developing cardiovascular diseases.\n\n1.2 Weight Management\n\nExercise plays a crucial role in weight management and the prevention of obesity. Physical activities burn calories, boost metabolism, and build muscle mass, creating a healthy balance that aids in maintaining an optimal weight. Moreover, regular exercise can enhance the effectiveness of dietary changes, leading to more sustainable weight loss.\n\n1.3 Strengthening Bones and Muscles\n\nWeight-bearing and resistance exercises, such as weightlifting, jogging, and yoga, are essential for maintaining and enhancing bone density and muscle strength. This is particularly crucial as we age, helping to prevent conditions like osteoporosis and sarcopenia (age-related muscle loss).\n\nChapter 2: Mental Health Benefits\n2.1 Boosting Mood and Mental Well-being\n\nExercise is a powerful mood enhancer. Physical activity stimulates the release of endorphins, often referred to as the body's natural mood elevators. This release can lead to an improvement in mood, a reduction in anxiety, and a general sense of well-being.\n\n2.2 Enhancing Cognitive Function\n\nNumerous studies suggest that regular physical activity can result in improved cognitive function. This includes enhanced memory, better concentration, and a lower risk of developing cognitive degenerative diseases like Alzheimer's and dementia.\n\n2.3 Stress Reduction\n\nEngaging in regular physical activity is an effective strategy for stress management. Exercise not only helps in reducing the body's stress hormones, such as adrenaline and cortisol, but also promotes the production of endorphins, the body's natural painkillers and mood elevators.\n\nChapter 3: Emotional Health Benefits\n3.1 Building Self-esteem and Confidence\n\nRegular exercise can significantly boost self-esteem and confidence. As individuals notice improvements in strength, endurance, and physical appearance, their self-image and confidence levels can markedly increase.\n\n3.2 Enhancing Sleep Quality\n\nExercise can contribute to more sound and restorative sleep. Regular physical activity can help you fall asleep faster, deepen your sleep, and reduce instances of insomnia. However, it's advisable to avoid vigorous exercise close to bedtime, as it might have the opposite effect due to the energizing impact of exercise.\n\n3.3 Cultivating Resilience\n\nPhysical activity can help in building emotional resilience. Individuals who exercise regularly tend to develop a higher threshold for stress and are better equipped to handle life's ups and downs.\n\nChapter 4: Social Benefits\n4.1 Fostering Connections and Community\n\nExercise often involves a social component, whether it's working out at a gym, attending a fitness class, or joining a sports team. These activities provide opportunities to meet new people, enhance social skills, and build supportive communities.\n\n4.2 Developing Teamwork and Leadership Skills\n\nParticipating in team sports or group fitness classes can enhance teamwork and leadership skills. These activities require communication, collaboration, and sometimes stepping up as a leader, all valuable skills transferable to other areas of life.\n\nChapter 5: Long-term Benefits and Aging\n5.1 Promoting Longevity\n\nRegular exercise is linked to increased longevity. By reducing the risk of chronic diseases, maintaining physical and mental agility, and enhancing the quality of life, physical activity can add healthy years to one's lifespan.\n\n5.2 Aging Gracefully\n\nMaintaining an active lifestyle can significantly impact how we age. Regular exercise helps in preserving mobility, flexibility, and independence, contributing to a higher quality of life in later years.\n\nConclusion\nThe benefits of regular exercise are vast and encompass various aspects of human health and well-being. By dedicating time to physical activity, individuals can enhance their physical, mental, emotional, and social health, leading to a more balanced and fulfilling life. Regardless of age or fitness level, the journey to a healthier life through exercise is accessible to everyone and is a testament to the adage that it's never too late to start.\n\n, and shared. Online libraries, digital textbooks\n\n\n"}];
  constructor(
    private materialService: MaterialService,
    private userService: UserService
  ) {
    this.subscription = this.userService.userId$.subscribe((id) => {
      this.userId = id;
      console.log(this.userId);
    });
  }

  ngOnInit(): void {
    this.subscription = this.userService.userId$.subscribe((id) => {
      this.userId = id;
      if (this.userId) {
        this.loadMaterials();
      }
    });
  }
  
  toggleExpanded(materialId: number): void {
    this.expandedState[materialId] = !this.expandedState[materialId];
  }

  loadMaterials(): void {
    this.materialService.getMaterials(this.userId!).subscribe({
      next: (materials: MaterialDTO[]) => {
        //this.materials = materials;
      },
      error: (error) => {
        console.error('There was an error fetching materials!', error);
      },
    });
  }

  ngOnDestroy(): void {
    this.subscription.unsubscribe();
  }
}
